//
// GENERATED CODE, DO NOT EDIT THIS FILE!
//
// Generated by MainComponentSerializerGenerator for CustomerCreditTransferInitiationV11.  ISO2002 ID# _rUXmwdcBEeq_l4BJLVUF2Q.
// Copyright 2024 Jeff Ward, Beneficial Strategies. Usage subject to license of enclosing library.
//

using BeneficialStrategies.Iso20022.Components;
using BeneficialStrategies.Iso20022.pain;
using System.Xml;

namespace BeneficialStrategies.Iso20022.Serialization.Xml.Writers.pain
{
    /// <summary>
    /// Performs the XML serialization faithful to ISO20002 standards for <seealso cref="CustomerCreditTransferInitiationV11"/>.
    /// </summary>
    public class CustomerCreditTransferInitiationV11XmlAsyncWriter : ISubordinateXmlAsyncWriter<CustomerCreditTransferInitiationV11>
            , IXmlAsyncWriter<CustomerCreditTransferInitiationV11>
    {
        // Injected dependencies for serialization of each member data type
        private readonly ISubordinateXmlAsyncWriter<GroupHeader95> groupHeader;
        private readonly ISubordinateXmlAsyncWriter<PaymentInstruction40> paymentInformation;
        private readonly ISubordinateXmlAsyncWriter<SupplementaryData1> supplementaryData;
        public CustomerCreditTransferInitiationV11XmlAsyncWriter(
                ISubordinateXmlAsyncWriter<GroupHeader95> groupHeader,
                ISubordinateXmlAsyncWriter<PaymentInstruction40> paymentInformation,
                ISubordinateXmlAsyncWriter<SupplementaryData1> supplementaryData
        )
        {
            this.groupHeader = groupHeader;
            this.paymentInformation = paymentInformation;
            this.supplementaryData = supplementaryData;
        }
        public async Task WriteAsync(XmlWriter writer, CustomerCreditTransferInitiationV11 valueBeingSerialized, string isoNamespace)
        {
            // GroupHeader Required GroupHeader95 GroupHeader95
            await writer.WriteStartElementAsync(null, "GrpHdr", isoNamespace );
            await groupHeader.WriteAsync(writer, valueBeingSerialized.GroupHeader, isoNamespace);
            await writer.WriteEndElementAsync();
            // PaymentInformation Required PaymentInstruction40 PaymentInstruction40
            await writer.WriteStartElementAsync(null, "PmtInf", isoNamespace );
            await paymentInformation.WriteAsync(writer, valueBeingSerialized.PaymentInformation, isoNamespace);
            await writer.WriteEndElementAsync();
            // SupplementaryData Optional SupplementaryData1 SupplementaryData1
            if ( valueBeingSerialized.SupplementaryData is SupplementaryData1 populatedSupplementaryData)
            {
                await writer.WriteStartElementAsync(null, "SplmtryData", isoNamespace );
                await supplementaryData.WriteAsync(writer, populatedSupplementaryData, isoNamespace);
                await writer.WriteEndElementAsync();
            }
        }
        
        /// <summary>
        /// Writes the specified <seealso cref="CustomerCreditTransferInitiationV11"/> message in ISO20022 compliant format.
        /// Uses the conventions specified in constants in the message itself.
        /// </summary>
        /// <param name="writer">Xml writer to write to. Must have async enabled.</param>
        /// <param name="message">The message with the contents to be serialized.</param>
        /// <returns>The async task that writes the message.</returns>
        public async Task WriteAsync( XmlWriter writer, CustomerCreditTransferInitiationV11 message )
        {
            await writer.WriteStartElementAsync( null, 
                CustomerCreditTransferInitiationV11.DocumentElementName,
                CustomerCreditTransferInitiationV11.DocumentNamespace);
            await writer.WriteStartElementAsync( null, CustomerCreditTransferInitiationV11.XmlTag, CustomerCreditTransferInitiationV11.DocumentNamespace );
            await this.WriteAsync(writer, message, CustomerCreditTransferInitiationV11.DocumentNamespace); // Use subordinate interface to write contents
            await writer.WriteEndElementAsync(); // end of message
            await writer.WriteEndElementAsync(); // end of document
        }
    }
}
